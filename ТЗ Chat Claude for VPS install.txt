У меня есть приложение на Streamlit (файл app.py.txt) и файл с зависимостями к нему (файл requirements.txt).

Также есть VPS сервер у провайдера Hostinger.

Приложение нормально работает локально и запускается в виртуальном окружении командой streamlit run app.py

Мне нужно создать и настроить сервер на моём VPS под это приложение, загрузить на сервер нужные файлы и обеспечить работу приложения в браузере через интернет.

Давай начнём с создания нужного сервера в окне на скриншоте. Затем подробно по шагам расскажи мне, что делать дальше.

*****************

ssh root@147.93.94.184
xtxg7#ejtiTd8&reWtyr&d6fu

Набрал yes и ввёл пароль от сервера

apt update && apt upgrade -y

*****************

Шаг 2: Создание пользователя для приложения
Не рекомендуется запускать приложения от root. Создадим отдельного пользователя:

streamlitapp

Password:
RCTe4&BUxeru7SE

*****************

cd ~
rm -rf app
git clone https://github.com/tortugaamarilla/topic_maker.git app
cd app
ls -la

*****************

Теперь сервер будет сам вытягивать все последние версии с гитхаба? Или нужно будет чего-то делать самому?

Нет, сервер не будет автоматически вытягивать изменения с GitHub. Вам нужно будет делать это вручную каждый раз после внесения изменений.

su - streamlitapp
cd ~/app
git pull
exit
sudo systemctl restart streamlit

*****************

Я обновил и запушил requirements.txt на гитхаб. Как теперь обновить его на сервере?

su - streamlitapp
cd ~/app
source venv/bin/activate
git pull
pip install --upgrade -r requirements.txt
deactivate
exit
sudo systemctl restart streamlit

Эти команды:

Переключатся на пользователя streamlitapp
Перейдут в папку приложения
Активируют виртуальное окружение
Подтянут обновленный requirements.txt с GitHub
Обновят все библиотеки до новых версий
Деактивируют виртуальное окружение
Вернутся к root
Перезапустят приложение

Установка может занять несколько минут, так как будут обновляться многие пакеты. После завершения обновите страницу приложения в браузере (Ctrl+F5) и проверьте, исчезли ли ошибки.

*****************

Памятка по работе с сервером

ssh root@147.93.94.184
xtxg7#ejtiTd8&reWtyr&d6fu

Обновление приложения после изменений:
su - streamlitapp
cd ~/app
git pull
exit
sudo systemctl restart streamlit

Password streamlitapp:
RCTe4&BUxeru7SE
http://147.93.94.184/

Если обновили зависимости (requirements.txt):
su - streamlitapp
cd ~/app
source venv/bin/activate
git pull
pip install --upgrade -r requirements.txt
deactivate
exit
sudo systemctl restart streamlit

Просмотр логов при проблемах:
journalctl -u streamlit -n 50 --no-pager

*****************

В поле "Транскрипция видео референса:" вместо транскрипции я вижу ошибку: Транскрипция недоступна для этого видео

Но на самом деле для этого видео транскрипция доступна и без проблем попадает в поле при локальном запуске.

Посмотри ещё раз код программы (app.py.txt) и расскажи о наиболее вероятной проблеме.

*****************

Теперь проверим версии на сервере:
su - streamlitapp
cd ~/app
source venv/bin/activate
pip show anthropic
pip show youtube-transcript-api
pip show streamlit

*****************



*****************



*****************



*****************



*****************



*****************



*****************



*****************



*****************



*****************



*****************



*****************



*****************